

module.exports={
	command:'--db-sync',
	description: 'Sincroniza los modelos del proyecto',
	placeholder:'dbSync',
	action:function(R,value,arg){
			var lodash = require('lodash'),
				format= require('./../util/format');

			R.readOptions();
			
			if(R.hasDatabaseConfig()){
				var obj={};
				obj=lodash.extend(obj,R.options.database.options)
				R.prepareDatabase(R.options.database.name,R.options.database.user,R.options.database.password,obj)
				
				R.database.sequelize
					  .sync()
						  .then(function(err) {
						  	console.log(format.getFormated('Los modelos fueron Sincronizados correctamente.','blue'));
						   
						  })
						  .catch(function (err) {
						    console.log(format.getFormated('Unable to connect to the database:','red'), err);
						  
						  });
			}else{
				console.log(format.getFormated('No se encontró la configuración de conexión con la base de datos','red'))
			}
			
		
	}
}