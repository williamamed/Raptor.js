"use strict"
/**
* Esta clase define las funciones que seran
* expuestas dentro del objeto R en las plantillas ejs
* de cada vista
*
* @author William Amed
*/
class ViewFunctions {

	constructor(app){
		this.R=app;
	}
	/**
	* Setea el request activo de esta peticion
	*
	* @author William Amed
	* @api private
	*/
	__setRequest(req){
		this.req=req;
	}
	/**
	* Retorna contenido insertado en el punto caliente especificado
	*
	* @author William Amed
	* @api public
	*/
	plugin(name){
		if(this.R.viewHotSpot[name]){
			var text='';
			for (var i = 0; i < this.R.viewHotSpot[name].length; i++) {
				text+=this.R.viewHotSpot[name][i];
			};
			return text;
		}
		return '';
	}
	/**
	* Devuelve el texto definido en la internacionalizacion para la configuracion
	* de idioma actual
	*
	* @author William Amed
	* @api public
	*/
	lang(tag,values,bundle){

		if(typeof values=='string'){
			bundle=values;
			values={};
		}
		if(!bundle)
			bundle=this.req.language.bundle?this.req.language.bundle.name:''
		
		return this.R.i18n.__(tag,values,this.req.language.getCurrentLanguage(),bundle)
	}

	hola(){
		return "hola mundo 3"
	}
}

module.exports=ViewFunctions;