/**
* 
* @author William Amed
*/
module.exports={
	/**
	*
	*
	*/
	getContent:function(body,R,response){
		this.R=R;
		this.res=response;
		this.body=body;
		if(!response.req.xhr && response.req.method=='GET'){
			
			var content=this.__core();
			if(R.app.get('env')=='development'){
				content+=this.__debug(content);
			}
			return content;
		}else
			return body;
		
	},
	/**
	*
	*
	*/
	__debug:function(content){
		return '';
	},
	/**
	*
	*
	*/
	__core:function(){
		var client;
		//var language=response.req.language;
		//language.getLanguage()//es, en , 
		//console.log('lenguage',this.res.req.language.getCurrentLanguage())
		this.res.render(__dirname+'/views/client.ejs',{
			lang:require('i18n-nodejs'),
			currentLanguage:this.res.req.language.getCurrentLanguage()
		},function(err,str){
			if(err)client='';
			client=str;
		})
		while(!client){}
		if(this.body.indexOf('<head>')!=1)
			return this.body.replace('<head>','<head>'+client);
		else
			return client+this.body;
	}
}