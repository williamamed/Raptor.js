<script type="text/javascript">
	Raptor={
		getTag:function(){
			return this.language.tag.apply(this.language,arguments)
		},
		language:{
			tag:function(name,values,bundle){
				if(typeof values=='string'){
					bundle=values;
					values={};
				}
				if(!this.__i18nInstance)
					this.__i18nInstance=this.__i18n(this.__i18nDef);

				return this.__i18nInstance.__(name,values,this.getCurrentLanguage(),bundle?bundle:'<%- language.bundle?language.bundle.name:"" %>')
			},
			getCurrentLanguage:function(){
				return '<%- language.getCurrentLanguage() %>';
			},
			__i18nDef: <%- i18nDef%>,
			__i18n: <%- i18n %>,
			__i18nInstance: null
		},
		__plugins: [
			<% for (var i = 0; i < plugin.length; i++) { %>
				<% if(typeof plugin[i] == 'object' && plugin[i].name && plugin[i].callback && typeof plugin[i].name=="string" && typeof plugin[i].callback=='function') { %>
					{name:'<%- plugin[i].name %>',callback:<%- plugin[i].callback %>},
				<% } %>
			<% }  %>
		],

	}
	for (var i = 0; i < Raptor.__plugins.length; i++) {
		Object.defineProperty(Raptor,Raptor.__plugins[i].name,{
		    enumerable: true,
		    configurable: true,
		    value: Raptor.__plugins[i].callback,
		    writable: true
		  })
	}
	
	
</script>