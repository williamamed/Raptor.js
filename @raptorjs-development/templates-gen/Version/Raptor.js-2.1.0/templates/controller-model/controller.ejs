'use strict';

/**
 * Raptor.js - v2
 * Generado automaticamente
 * 
 * @Route("<%-baseRoute%>")
 * @Controller
 */
class <%-className%>{

	configure(){
		
	}
    
    <% if(templateName){ %>
    /**
     * @Route("")
     */
	indexAction(req,res,next){
		
		res.render("<%-templateName%>");
	}
    <%}%>

	/**
	 * @Route("/list")
	 */
	listAction(req,res,next,<%-modelo%>){
		<%-modelo%>
		.findAll()
		.then(function(data){
			res.json(data)
		})
		.catch(function(err){
			next(err);
		})
	}

	/**
	 * @Route("/insert",method="post")
	 */
	insertAction(req,res,next,<%-modelo%>){
		<%-modelo%>
		.create(req.body)
		.then(function(data){
			res.json(data)
		})
		.catch(function(err){
			next(err);
		})
	}

	/**
	 * @Route("/edit/:id",method="put")
	 */
	editAction(req,res,next,<%-modelo%>){
		<%-modelo%>
		.findByPk(req.params.id)
		.then(function(row){
			return row.update(req.body)
		})
		.then(function(data){
			res.json(data)
		})
		.catch(function(err){
			next(err);
		})
	}

	/**
	 * @Route("/delete/:id",method="delete")
	 */
	deleteAction(req,res,next,<%-modelo%>){
		<%-modelo%>
		.findByPk(req.params.id)
		.then(function(row){
			return row.destroy()
		})
		.then(function(data){
			res.json(data)
		})
		.catch(function(err){
			next(err);
		})
	}
}

module.exports=<%-className%>;